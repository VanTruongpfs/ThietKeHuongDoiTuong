package quanlicuahang;
import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.time.LocalDate;
import java.util.Date;

import javax.swing.BorderFactory;
import javax.swing.ButtonGroup;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.table.DefaultTableModel;

public class GiaoDienChinh extends JFrame {
    JPanel pnContainerTaoDon, pnContainerQuanly, pnHoaDon, pnSanPham;
    JMenuBar menubar;
    JMenu mnHoaDon, mnQuanLiHeThong;

    CardLayout cardLayout;

    public GiaoDienChinh() {
        setTitle("Quản lý cửa hàng");
        setSize(1000, 600);
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        // CardLayout cho content pane
        cardLayout = new CardLayout();
        getContentPane().setLayout(cardLayout);

        // Tạo menu
        menubar = new JMenuBar();
        mnHoaDon = new JMenu("Tạo hóa đơn");
        mnQuanLiHeThong = new JMenu("Chức năng quản lý");

        menubar.add(mnHoaDon);
        menubar.add(mnQuanLiHeThong);
        setJMenuBar(menubar);

        // Tạo các panel
        pnContainerTaoDon = new JPanel(new BorderLayout());
        taoGiaoDienTaoDon();
        
        pnContainerQuanly = new JPanel(new BorderLayout());
        pnContainerQuanly.add(new JLabel("Giao diện quản lý hệ thống", JLabel.CENTER), BorderLayout.CENTER);

        // Thêm các panel vào CardLayout
        getContentPane().add(pnContainerTaoDon, "TaoDon");
        getContentPane().add(pnContainerQuanly, "QuanLy");

        // Thêm sự kiện chuyển layout
        mnHoaDon.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                cardLayout.show(getContentPane(), "TaoDon");
            }
        });

        mnQuanLiHeThong.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                cardLayout.show(getContentPane(), "QuanLy");
            }
        });

        setLocationRelativeTo(null);
        setVisible(true);
    }
    
    //Giao diện tạo hóa đơn
    private void taoGiaoDienTaoDon() {
        // Panel chính chứa bên trái và phải
        JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
        splitPane.setResizeWeight(0.4); // 40% trái, 60% phải

        // === Panel trái: Form hóa đơn ===
        JPanel pnTrai = new JPanel(new BorderLayout());
        JPanel pnThongTin = new JPanel(new GridLayout(4, 2, 10, 10));
        pnThongTin.setBorder(BorderFactory.createTitledBorder("HÓA ĐƠN BÁN LẺ"));

        // Các trường nhập liệu
        LocalDate date = LocalDate.now();
        pnThongTin.add(new JLabel("Mã hóa đơn"));
        pnThongTin.add(new JTextField("HD002"));
        pnThongTin.add(new JLabel("Ngày lập hóa đơn"));
        pnThongTin.add(new JTextField(date.getDate()+" / "+date.getMonth()+" / "+ date.getYear()));
        pnThongTin.add(new JLabel("Tên nhân viên"));
        pnThongTin.add(new JComboBox<String[]>());
        pnThongTin.add(new JLabel("SDT khách hàng"));
        pnThongTin.add(new JTextField());


        // Bảng chi tiết món đã chọn
        String[] columns = { "TÊN MÓN", "SỐ LƯỢNG", "ĐƠN GIÁ", "THÀNH TIỀN" };
        JTable tblChiTiet = new JTable(new DefaultTableModel(columns, 0));
        JScrollPane scrollChiTiet = new JScrollPane(tblChiTiet);

        // Panel thanh toán
        JPanel pnThanhToan = new JPanel(new GridLayout(3, 2, 5, 5));
        pnThanhToan.setBorder(BorderFactory.createTitledBorder("Thanh toán"));
        pnThanhToan.add(new JLabel("Tổng tiền"));
        pnThanhToan.add(new JTextField());
        pnThanhToan.add(new JLabel("PTTT"));
        JPanel ptPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        // Phương thức thanh toán
        ButtonGroup pttt = new ButtonGroup();
        JRadioButton rdTienMat = new JRadioButton("Tiền mặt");
        JRadioButton rdChuyenKhoan = new JRadioButton("Chuyển khoản");
        pttt.add(rdTienMat);
        pttt.add(rdChuyenKhoan);
        ptPanel.add(rdTienMat);
        ptPanel.add(rdChuyenKhoan);
        
        pnThanhToan.add(ptPanel);
        pnThanhToan.add(new JLabel("Tiền khách đưa"));
        pnThanhToan.add(new JTextField());
        
        // Nút thao tác
        JPanel pnNut = new JPanel(new FlowLayout(FlowLayout.CENTER));
        pnNut.add(new JButton("Hủy hóa đơn"));
        pnNut.add(new JButton("Xuất hóa đơn"));

        // Gắn các phần vào panel trái
        pnTrai.add(pnThongTin, BorderLayout.NORTH);
     
        pnTrai.add(scrollChiTiet, BorderLayout.SOUTH);

        JPanel pnDuoiTrai = new JPanel(new BorderLayout());
        pnDuoiTrai.add(pnThanhToan, BorderLayout.CENTER);
        pnDuoiTrai.add(pnNut, BorderLayout.SOUTH);

        pnTrai.add(pnDuoiTrai, BorderLayout.SOUTH);

        // === Panel phải: MENU BAR ===
        JPanel pnPhai = new JPanel(new BorderLayout());
        pnPhai.setBorder(BorderFactory.createTitledBorder("MENU BAR"));

        String[] cols = { "Tên món", "Ảnh", "Giá" };
        Object[][] data = {
            { "OSHI KHOAI TÂY", "/images/caphe_den_da.jpg", 25000.0 },
            { "SỮA VINAMILk", "/images/caphe_sua_da.jpg", 30000.0 },
            { "Xà bông", "/images/cappuccino.jpg", 45000.0 },
            { "Búa", "/images/latte.jpg", 45000.0 },
            { "Dao", "/images/espresso.jpg", 36000.0 },
            { "Pin", "/images/americano.jpg", 35000.0 }
        };
        JTable tblMenu = new JTable(new DefaultTableModel(data, cols));
        JScrollPane scrollMenu = new JScrollPane(tblMenu);

        // Tìm kiếm
        JPanel pnTimKiem = new JPanel(new BorderLayout());
        pnTimKiem.add(new JTextField(), BorderLayout.CENTER);
        pnTimKiem.add(new JButton("Tìm Kiếm"), BorderLayout.EAST);
        
        JPanel pnThaoTac = new JPanel();
        JButton btThem = new JButton("Thêm sản phẩm");
        JButton btXoa = new JButton("Xóa sản phẩm");
        pnThaoTac.add(btThem);
        pnThaoTac.add(btXoa);
        
        pnPhai.add(pnTimKiem, BorderLayout.NORTH);
        pnPhai.add(scrollMenu, BorderLayout.CENTER);
        pnPhai.add(pnThaoTac, BorderLayout.SOUTH);
        
        // Gắn vào SplitPane
        splitPane.setLeftComponent(pnTrai);
        splitPane.setRightComponent(pnPhai);

        // Thêm vào pnContainerTaoDon
        pnContainerTaoDon.removeAll();
        pnContainerTaoDon.add(splitPane, BorderLayout.CENTER);
        pnContainerTaoDon.revalidate();
        pnContainerTaoDon.repaint();
    }

    public static void main(String[] args) {
        new GiaoDienChinh();
    }
}
