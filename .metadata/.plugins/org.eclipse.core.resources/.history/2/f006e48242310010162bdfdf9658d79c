package quanlicuahang;

import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.time.LocalDate;

import javax.swing.BorderFactory;
import javax.swing.ButtonGroup;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.table.DefaultTableModel;

public class TaoDon {
	JPanel pnTaoDon;
	// Giao diện tạo hóa đơn
		public void taoGiaoDienTaoDon() {
			JPanel pnTaoDon = new JPanel();
			// Panel chính chứa bên trái và phải
			JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
			splitPane.setResizeWeight(0.4);

			// === Panel trái: Form hóa đơn ===
			JPanel pnTrai = new JPanel(new BorderLayout());
			JPanel pnThongTin = new JPanel(new GridLayout(4, 2, 10, 10));
			pnThongTin.setBorder(BorderFactory.createTitledBorder("HÓA ĐƠN BÁN LẺ"));

			// Các trường nhập liệu (tạo trước)
			JLabel lblMaHD = new JLabel("Mã hóa đơn");
			JTextField tfMaHD = new JTextField("HD002");

			JLabel lblNgayLap = new JLabel("Ngày lập hóa đơn");
			LocalDate date = LocalDate.now();
			JTextField tfNgayLap = new JTextField(date.getDayOfMonth() + "/" + date.getMonthValue() + "/" + date.getYear());

			JLabel lblTenNV = new JLabel("Tên nhân viên");
			String[] ten = { "Lê Vân Trường", "Lê Hữu Phước", "Nguyễn Gia Huy", "Trương Cao Đoàn", "Trần Nguyễn Thanh Tú",
					"Nguyễn Trọng Tín" };
			JComboBox<String> cbTenNV = new JComboBox<>(ten);

			JLabel lblSDT = new JLabel("SDT khách hàng");
			JTextField tfSDT = new JTextField();

			// Thêm vào panel thông tin
			pnThongTin.add(lblMaHD);
			pnThongTin.add(tfMaHD);
			pnThongTin.add(lblNgayLap);
			pnThongTin.add(tfNgayLap);
			pnThongTin.add(lblTenNV);
			pnThongTin.add(cbTenNV);
			pnThongTin.add(lblSDT);
			pnThongTin.add(tfSDT);

			// Bảng chi tiết món
			String[] columns = { "TÊN MÓN", "SỐ LƯỢNG", "ĐƠN GIÁ", "THÀNH TIỀN" };
			DefaultTableModel modelChiTiet = new DefaultTableModel(columns, 0);
			JTable tblChiTiet = new JTable(modelChiTiet);
			JScrollPane scrollChiTiet = new JScrollPane(tblChiTiet);

			// Panel thanh toán
			JPanel pnThanhToan = new JPanel(new GridLayout(3, 2));
			pnThanhToan.setBorder(BorderFactory.createTitledBorder("Thanh toán"));

			JLabel lblTongTien = new JLabel("Tổng tiền");
			JTextField tfTongTien = new JTextField();

			JLabel lblPTTT = new JLabel("PTTT");
			JRadioButton rdTienMat = new JRadioButton("Tiền mặt");
			JRadioButton rdChuyenKhoan = new JRadioButton("Chuyển khoản");
			JRadioButton rdTheNganHang = new JRadioButton("Thẻ NH");
			ButtonGroup bgPTTT = new ButtonGroup();
			bgPTTT.add(rdTienMat);
			bgPTTT.add(rdChuyenKhoan);
			bgPTTT.add(rdTheNganHang);
			JPanel ptPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
			ptPanel.add(rdTienMat);
			ptPanel.add(rdChuyenKhoan);
			ptPanel.add(rdTheNganHang);

			JLabel lblTienKhach = new JLabel("Tiền khách đưa");
			JTextField tfTienKhach = new JTextField();

			pnThanhToan.add(lblTongTien);
			pnThanhToan.add(tfTongTien);
			pnThanhToan.add(lblPTTT);
			pnThanhToan.add(ptPanel);
			pnThanhToan.add(lblTienKhach);
			pnThanhToan.add(tfTienKhach);

			// Nút thao tác
			JButton btnHuy = new JButton("Hủy hóa đơn");
			JButton btnXuat = new JButton("Xuất hóa đơn");
			JPanel pnNut = new JPanel(new FlowLayout(FlowLayout.CENTER));
			pnNut.add(btnHuy);
			pnNut.add(btnXuat);

			// Gắn vào trái
			pnTrai.add(pnThongTin, BorderLayout.NORTH);
			pnTrai.add(scrollChiTiet, BorderLayout.CENTER);

			JPanel pnDuoiTrai = new JPanel(new BorderLayout());
			pnDuoiTrai.add(pnThanhToan, BorderLayout.CENTER);
			pnDuoiTrai.add(pnNut, BorderLayout.SOUTH);
			pnTrai.add(pnDuoiTrai, BorderLayout.SOUTH);

			// === Panel phải: MENU BAR ===
			JPanel pnPhai = new JPanel(new BorderLayout());
			pnPhai.setBorder(BorderFactory.createTitledBorder("MENU BAR"));

			String[] cols = { "Tên món", "Ảnh", "Giá", "Số lượng còn lại" };
			Object[][] data = { { "OSHI KHOAI TÂY", ".....", 25000.0, 10 }, { "SỮA VINAMILk", ".........", 30000.0, 100 },
					{ "Xà bông", ".........", 45000.0, 20 }, { "Búa", ".........", 45000.0, 49 },
					{ "Dao", "...........", 36000.0, 21 }, { "Pin", "..............", 35000.0, 30 } };
			JTable tblMenu = new JTable(new DefaultTableModel(data, cols));
			JScrollPane scrollMenu = new JScrollPane(tblMenu);

			JTextField tfTimKiem = new JTextField();
			JButton btnTim = new JButton("Tìm Kiếm");
			JPanel pnTimKiem = new JPanel(new BorderLayout());
			pnTimKiem.add(tfTimKiem, BorderLayout.CENTER);
			pnTimKiem.add(btnTim, BorderLayout.EAST);

			JButton btnThemSP = new JButton("Thêm sản phẩm");
			JButton btnXoaSP = new JButton("Xóa sản phẩm");
			JPanel pnThaoTac = new JPanel();
			pnThaoTac.add(btnThemSP);
			pnThaoTac.add(btnXoaSP);

			pnPhai.add(pnTimKiem, BorderLayout.NORTH);
			pnPhai.add(scrollMenu, BorderLayout.CENTER);
			pnPhai.add(pnThaoTac, BorderLayout.SOUTH);

			// Gắn vào SplitPane
			splitPane.setLeftComponent(pnTrai);
			splitPane.setRightComponent(pnPhai);

			pnTaoDon.removeAll();
			pnTaoDon.add(splitPane, BorderLayout.CENTER);
			pnTaoDon.revalidate();
			pnTaoDon.repaint();
		}
}
